{% extends 'ohmyadmin/app.html' %}

{% block content %}
    <div class="space-y-6" hx-target="#data" hx-indicator="#load-indicator">
        <div class="flex items-center justify-between">
            <!-- search and actions -->
            <div class="flex items-center gap-3 flex-1 flex-wrap">

                <!-- search form -->
                <div class="w-96">
                    {% if page.searchable %}
                        <form method="get" role="search"
                              action="{{ request.url }}"
                              hx-get="{{ request.url.remove_query_params(page.search_param) }}"
                        >
                            <input type="search" incremental
                                   value="{{ search_term }}"
                                   name="{{ page.search_param }}"
                                   hx-get="{{ request.url.remove_query_params(page.search_param) }}"
                                   hx-trigger="keyup changed delay:300ms, search delay:300ms"
                                   placeholder="{{ page.search_placeholder }}"
                            >
                        </form>
                    {% endif %}
                </div>
                <!-- end search form -->

                <div id="filter-bar" hx-get hx-trigger="filters-reload" hx-target="this">
                    {% include 'ohmyadmin/pages/table/_filters.html' %}
                </div>
            </div>
            <!-- end search and actions -->
            {#            {% include 'ohmyadmin/list_page/batch_actions.html' %}#}
        </div>

        <div>
            <div class="-mb-[1px] htmx-indicator" id="load-indicator">
                <div class="progress progress-indeterminate progress-square progress-xs">
                    <div class="progress-bar"></div>
                </div>
            </div>
            <div id="data" hx-get hx-trigger="data-reload from:body" hx-target="this">
                {% include 'ohmyadmin/pages/table/_content.html' %}
            </div>
        </div>
    </div>
{% endblock %}
