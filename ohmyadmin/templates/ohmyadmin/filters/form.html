{% import 'ohmyadmin/lib/forms.html' as forms %}

<div class="inline-block relative" x-data="{open: false}" hx-target="#data" hx-boost="true" hx-indicator="#load-indicator">
    <button class="btn" @click="open = !open">
        <span>{{ filter.label }}</span>
        <span class="text-gray-500">{{ tabler_icon('chevron-down') }}</span>
    </button>
    <form method="get"
          action="{{ request.url }}"
          hx-get
          x-show="open"
          x-transition:enter="transition ease-out duration-100"
          x-transition:enter-start="transform opacity-0 scale-95"
          x-transition:enter-end="transform opacity-100 scale-100"
          x-transition:leave="transition ease-in duration-75"
          x-transition:leave-start="transform opacity-100 scale-100"
          x-transition:leave-end="transform opacity-0 scale-95"
          @click.outside="open = false"
          @submit="open = false"
          class="dropdown absolute top-0 left-0 w-64 translate-y-12 px-3 py-2">
        <div>
            {% for field in form %}
                {{ forms.form_field(field) }}
            {% endfor %}
        </div>
        <div class="mt-5">
            <button class="btn btn-accent" type="submit">
                {{ _('Apply', domain='ohmyadmin') }}
            </button>
        </div>
        {% for key, value in request.query_params.items() %}
            <input type="hidden" name="{{ key }}" value="{{ value }}">
        {% endfor %}
    </form>
</div>
